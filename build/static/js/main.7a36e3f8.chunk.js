(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{31:function(e,t,a){e.exports=a(53)},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(28),i=a.n(o),l=a(5),s=a(6),c=a(9),u=a(8),p=a(10),m=a(12),h=a(16),d=a(2),f=a.n(d),b=a(4),g=a.n(b),v=(a(37),a(40),a(54),{apiKey:"AIzaSyBCuw18Tt2U4Us3fSszRtqmfjNkDqgYcXg",authDomain:"react-blog-e8b05.firebaseapp.com",databaseURL:"https://react-blog-e8b05.firebaseio.com",projectId:"react-blog-e8b05",storageBucket:"react-blog-e8b05.appspot.com",messagingSenderId:"984283019221",appId:"1:984283019221:web:dfe4798b47a93172076f5c"}),E=new(function(){function e(){Object(l.a)(this,e),g.a.initializeApp(v),this.app=g.a.database(),this.storage=g.a.storage()}return Object(s.a)(e,[{key:"login",value:function(e,t){return g.a.auth().signInWithEmailAndPassword(e,t)}},{key:"logout",value:function(){return g.a.auth().signOut()}},{key:"register",value:function(e,t,a){var n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,f.a.awrap(g.a.auth().createUserWithEmailAndPassword(t,a));case 2:return n=g.a.auth().currentUser.uid,r.abrupt("return",g.a.database().ref("users").child(n).set({name:e}));case 4:case"end":return r.stop()}}))}},{key:"isInitialized",value:function(){return new Promise((function(e){g.a.auth().onAuthStateChanged(e)}))}},{key:"getCurrent",value:function(){return g.a.auth().currentUser&&g.a.auth().currentUser.email}},{key:"getCurrentUid",value:function(){return g.a.auth().currentUser&&g.a.auth().currentUser.uid}},{key:"getUserName",value:function(e){var t;return f.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(g.a.auth().currentUser){a.next=2;break}return a.abrupt("return",null);case 2:return t=g.a.auth().currentUser.uid,a.next=5,f.a.awrap(g.a.database().ref("users").child(t).once("value").then(e));case 5:case"end":return a.stop()}}))}}]),e}()),y=(a(42),a(43),function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={posts:[]},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.app.ref("posts").once("value",(function(t){var a=e.state;a.posts=[],t.forEach((function(e){a.posts.push({key:e.key,title:e.val().title,subtitle:e.val().subtitle,author:e.val().author,description:e.val().description,image:e.val().image,link:e.val().link})})),a.posts.reverse(),e.setState(a)}))}},{key:"render",value:function(){return r.a.createElement("section",{id:"post"},this.state.posts.map((function(e){return r.a.createElement("article",{key:e.key},r.a.createElement("header",null,r.a.createElement("div",{className:"title"},r.a.createElement("strong",null," ",e.title," "),r.a.createElement("span",null," ",e.subtitle," "),r.a.createElement("span",null,"Autor: ",e.author," "))),r.a.createElement("img",{src:e.image,alt:"Capa do Post"}),r.a.createElement("footer",null,r.a.createElement("p",null,e.description)))})))}}]),t}(n.Component)),j=a(7),O=(a(44),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).logout=function(e){E.logout().catch((function(e){console.log(e)})),localStorage.removeItem("name"),a.props.history.push("/")},a.state={name:localStorage.name},a.logout=a.logout.bind(Object(j.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(E.getCurrent()){t.next=3;break}return this.props.history.replace("/login"),t.abrupt("return",null);case 3:E.getUserName((function(t){localStorage.name=t.val().name,e.setState({name:localStorage.name})}));case 4:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{id:"dashboard"},r.a.createElement("div",{className:"user-info"},r.a.createElement("h1",null,"Ol\xe1 ",this.state.name),r.a.createElement(m.b,{to:"/dashboard/new"},"Novo Post")),r.a.createElement("p",null,"Logado com: ",E.getCurrent()),r.a.createElement("button",{onClick:function(){return e.logout()}},"Sair"))}}]),t}(n.Component)),w=Object(h.f)(O),k=(a(49),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onLogin=function(){var e,t,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,e=a.state,t=e.email,n=e.password,r.next=4,f.a.awrap(E.login(t,n).catch((function(e){console.log(e)})));case 4:a.props.history.replace("/dashboard"),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),alert(r.t0.message);case 10:case"end":return r.stop()}}),null,null,[[0,7]])},a.state={email:"",password:""},a.login=a.login.bind(Object(j.a)(a)),a.onLogin=a.onLogin.bind(Object(j.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"login",value:function(e){e.preventDefault(),this.onLogin()}},{key:"componentDidMount",value:function(){if(E.getCurrent())return this.props.history.replace("/dashboard")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.login,id:"login"},r.a.createElement("label",null," Email: "),r.a.createElement("br",null),r.a.createElement("input",{type:"email",autoComplete:"off",autoFocus:!0,value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})},placeholder:"Digite seu email"}),r.a.createElement("label",null," Password: "),r.a.createElement("br",null),r.a.createElement("input",{type:"password",autoComplete:"off",autoFocus:!0,value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},placeholder:"Digite sua senha"}),r.a.createElement("button",{type:"submit"}," Entrar "),r.a.createElement(m.b,{to:"/register"},"\xc9 novo por aqui ? Cadastre-se")))}}]),t}(n.Component)),x=Object(h.f)(k),C=(a(50),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement("header",{id:"main-header"},r.a.createElement("div",{className:"header-content"},r.a.createElement(m.b,{to:"/"},"Blog"),r.a.createElement(m.b,{to:"/login"},"Entrar")))}}]),t}(n.Component)),S=(a(51),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onRegister=function(){var e,t,n,r;return f.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,e=a.state,t=e.name,n=e.email,r=e.password,o.next=4,f.a.awrap(E.register(t,n,r).catch((function(e){console.log(e)})));case 4:a.props.history.replace("/dashboard"),o.next=10;break;case 7:o.prev=7,o.t0=o.catch(0),alert(o.t0.message);case 10:case"end":return o.stop()}}),null,null,[[0,7]])},a.state={name:"",email:"",password:""},a.register=a.register.bind(Object(j.a)(a)),a.onRegister=a.onRegister.bind(Object(j.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"register",value:function(e){e.preventDefault(),this.onRegister()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.register,id:"register"},r.a.createElement("label",null," Nome: "),r.a.createElement("br",null),r.a.createElement("input",{type:"text",autoComplete:"off",autoFocus:!0,value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})},placeholder:"Digite seu nome"}),r.a.createElement("label",null," Email: "),r.a.createElement("br",null),r.a.createElement("input",{type:"email",autoComplete:"off",value:this.state.email,onChange:function(t){return e.setState({email:t.target.value})},placeholder:"Digite seu email"}),r.a.createElement("label",null," Password: "),r.a.createElement("br",null),r.a.createElement("input",{type:"password",autoComplete:"off",autoFocus:!0,value:this.state.password,onChange:function(t){return e.setState({password:t.target.value})},placeholder:"Digite sua senha"}),r.a.createElement("button",{type:"submit"}," Cadastrar ")))}}]),t}(n.Component)),D=Object(h.f)(S),P=(a(52),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleFile=function(e){var t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.target.files[0]){n.next=11;break}if("image/png"!==(t=e.target.files[0]).type&&"image/jpeg"!==t.type){n.next=8;break}return n.next=5,f.a.awrap(a.setState({file:t}));case 5:a.onHandleFile(),n.next=11;break;case 8:return a.setState({alert:"Envie uma imagem  tipo JPG ou PNG"}),a.setState({file:null}),n.abrupt("return",null);case 11:case"end":return n.stop()}}))},a.onHandleFile=function(){var e,t,n;return f.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e=a.state.file,t=E.getCurrentUid(),n=E.storage.ref("images/".concat(t,"/").concat(e.name)).put(e),r.next=5,f.a.awrap(n.on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);a.setState({progress:t})}),(function(e){console.log(e)}),(function(){E.storage.ref("images/".concat(t)).child(e.name).getDownloadURL().then((function(e){a.setState({image:e})}))})));case 5:case"end":return r.stop()}}))},a.onAddPost=function(){var e,t;return f.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(""===a.state.titulo||""===a.state.image||""===a.state.description||null===a.state.file){n.next=8;break}return e=E.app.ref("posts"),t=e.push().key,n.next=5,f.a.awrap(e.child(t).set({title:a.state.title,subtitle:a.state.subtitle,image:a.state.image,description:a.state.description,author:localStorage.name}));case 5:a.props.history.push("/dashboard"),n.next=9;break;case 8:a.setState({alert:"Preencha todos os campos!"});case 9:case"end":return n.stop()}}))},a.state={title:"",subtitle:"",description:"",image:"",file:null,alert:"",progress:0},a.addPost=a.addPost.bind(Object(j.a)(a)),a.onAddPost=a.onAddPost.bind(Object(j.a)(a)),a.handleFile=a.handleFile.bind(Object(j.a)(a)),a.onHandleFile=a.onHandleFile.bind(Object(j.a)(a)),a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(E.getCurrent()){t.next=3;break}return this.props.history.replace("/"),t.abrupt("return",null);case 3:E.getUserName((function(t){localStorage.name=t.val().name,e.setState({name:localStorage.name})}));case 4:case"end":return t.stop()}}),null,this)}},{key:"addPost",value:function(e){e.preventDefault(),this.onAddPost()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("header",{id:"newpost"},r.a.createElement(m.b,{to:"/dashboard"},"Voltar")),r.a.createElement("form",{onSubmit:this.addPost,id:"form-post"},r.a.createElement("span",null,this.state.alert),r.a.createElement("label",null,"T\xedtulo:"),r.a.createElement("input",{type:"text",placeholder:"Digite o t\xedtulo",value:this.state.title,onChange:function(t){return e.setState({title:t.target.value})},autoFocus:!0}),r.a.createElement("label",null,"Sub-t\xedtulo:"),r.a.createElement("input",{type:"text",placeholder:"Se houver digite o sub-titulo",value:this.state.subtitle,onChange:function(t){return e.setState({subtitle:t.target.value})}}),r.a.createElement("label",null,"Imagem:"),r.a.createElement("input",{type:"file",onChange:this.handleFile}),""!==this.state.image?r.a.createElement("img",{src:this.state.image,width:"250",height:"150",alt:"Capa do Post"}):r.a.createElement("progress",{value:this.state.progress,max:"100"}),r.a.createElement("label",null,"Descri\xe7\xe3o:"),r.a.createElement("textarea",{type:"text",placeholder:"Digite a descri\xe7\xe3o...",value:this.state.description,onChange:function(t){return e.setState({description:t.target.value})}}),r.a.createElement("button",{type:"submit"},"Cadastrar")))}}]),t}(n.Component)),U=Object(h.f)(P),F=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={firebaseInitialized:!1},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.isInitialized().then((function(t){e.setState({firebaseInitialized:t})}))}},{key:"render",value:function(){return!1!==this.state.firebaseInitialized?r.a.createElement(m.a,null,r.a.createElement(C,null),r.a.createElement(h.c,null,r.a.createElement(h.a,{exact:!0,path:"/",component:y}),r.a.createElement(h.a,{exact:!0,path:"/login",component:x}),r.a.createElement(h.a,{exact:!0,path:"/dashboard",component:w}),r.a.createElement(h.a,{exact:!0,path:"/dashboard/new",component:U}),r.a.createElement(h.a,{exact:!0,path:"/register",component:D}))):r.a.createElement("h1",null,"Carregando...")}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[31,1,2]]]);
//# sourceMappingURL=main.7a36e3f8.chunk.js.map